<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SM VOICE â€“ Intelligent AI Assistant</title>

<style>
:root{
  --bg:#020617;
  --panel:#0f172a;
  --user:#2563eb;
  --ai:#1e293b;
  --text:#e5e7eb;
  --accent:#22c55e;
}
*{box-sizing:border-box;font-family:system-ui,-apple-system,"Segoe UI",sans-serif}
body{
  margin:0;height:100vh;
  background:radial-gradient(circle at top,#0b1020,#020617);
  color:var(--text);
  display:flex;flex-direction:column;
}
.header{
  padding:14px;text-align:center;font-weight:700;
  border-bottom:1px solid #1e293b;
}
select{
  margin-top:6px;padding:8px 12px;border-radius:10px;
  background:#020617;color:white;border:1px solid #334155;
}
.chat{
  flex:1;padding:16px;overflow-y:auto;
  display:flex;flex-direction:column;gap:14px;
}
.bubble{
  max-width:85%;padding:14px 16px;
  border-radius:22px;line-height:1.5;
  animation:fade .25s ease;
}
.user{
  background:linear-gradient(135deg,#2563eb,#1d4ed8);
  align-self:flex-end;
}
.ai{
  background:#1e293b;
  align-self:flex-start;
}
.footer{
  padding:22px;
  display:flex;justify-content:center;
  border-top:1px solid #1e293b;
}
.voice{
  width:120px;height:120px;border-radius:50%;
  background:radial-gradient(circle,#22c55e,#064e3b);
  display:flex;align-items:center;justify-content:center;
  cursor:pointer;
  box-shadow:0 0 40px rgba(34,197,94,.6);
  transition:.3s;
}
.voice.listening{
  background:radial-gradient(circle,#ef4444,#7f1d1d);
  box-shadow:0 0 45px rgba(239,68,68,.8);
}
.wave{display:flex;gap:6px}
.wave span{
  width:7px;height:26px;background:#e5e7eb;
  border-radius:8px;
  animation:wave 1.2s infinite ease-in-out;
}
.wave span:nth-child(2){animation-delay:.1s}
.wave span:nth-child(3){animation-delay:.2s}
.wave span:nth-child(4){animation-delay:.3s}
.wave span:nth-child(5){animation-delay:.4s}
@keyframes wave{
  0%,100%{height:18px}
  50%{height:42px}
}
@keyframes fade{
  from{opacity:0;transform:translateY(6px)}
  to{opacity:1;transform:none}
}
</style>
</head>

<body>

<div class="header">
ðŸŽ§ SM VOICE â€“ Intelligent AI (ChatGPT Style)
<br>
<select id="lang">
  <option value="en-US">English</option>
  <option value="hi-IN">Hindi</option>
  <option value="ar-SA">Arabic</option>
</select>
</div>

<div id="chat" class="chat">
  <div class="bubble ai">
    Hello ðŸ‘‹  
    Iâ€™m your intelligent AI assistant.  
    You can ask **many questions continuously**, like ChatGPT.
  </div>
</div>

<div class="footer">
  <div id="voice" class="voice">
    <div class="wave">
      <span></span><span></span><span></span><span></span><span></span>
    </div>
  </div>
</div>

<script>
const chat = document.getElementById("chat");
const voiceBtn = document.getElementById("voice");
const langSelect = document.getElementById("lang");

const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
const recognition = new SR();
recognition.interimResults = false;

let listening=false;
let femaleVoice=null;
let memory=[];

/* LOAD FEMALE VOICE */
function loadVoices(){
  const voices = speechSynthesis.getVoices();
  const l = langSelect.value;
  femaleVoice =
    voices.find(v=>v.lang===l && /female|zira|google|neural/i.test(v.name))
    || voices.find(v=>v.lang===l)
    || voices[0];
}
speechSynthesis.onvoiceschanged = loadVoices;
loadVoices();

/* CHAT ADD */
function add(text,type){
  const d=document.createElement("div");
  d.className="bubble "+type;
  d.innerHTML=text;
  chat.appendChild(d);
  chat.scrollTop=chat.scrollHeight;
}

/* SPEAK */
function speak(text){
  speechSynthesis.cancel();
  const u=new SpeechSynthesisUtterance(text);
  u.lang=langSelect.value;
  if(femaleVoice)u.voice=femaleVoice;
  u.rate=.95;
  u.pitch=1.05;
  u.onend=()=>setTimeout(startListening,800);
  speechSynthesis.speak(u);
}

/* START LISTEN */
function startListening(){
  if(listening)return;
  recognition.lang=langSelect.value;
  listening=true;
  voiceBtn.classList.add("listening");
  recognition.start();
}

/* BUTTON */
voiceBtn.onclick=startListening;

/* RESULT */
recognition.onresult=e=>{
  recognition.stop();
  listening=false;
  voiceBtn.classList.remove("listening");

  const text=e.results[0][0].transcript;
  memory.push({role:"user",content:text});
  add(text,"user");
  intelligentAI(text);
};

/* INTELLIGENT AI CORE */
async function intelligentAI(q){
  add("Thinkingâ€¦","ai");

  // Simple reasoning
  let reply = "";
  if(/who is|what is|define|explain/i.test(q)){
    reply = await wikiAnswer(q);
  }else if(/hello|hi|hey/i.test(q)){
    reply = "Hello ðŸ˜Š How can I help you today?";
  }else{
    reply = await smartSearch(q);
  }

  memory.push({role:"ai",content:reply});
  add(reply,"ai");
  speak(reply.slice(0,160));
}

/* WIKIPEDIA INTELLIGENCE */
async function wikiAnswer(q){
  try{
    const r = await fetch(
      "https://en.wikipedia.org/api/rest_v1/page/summary/" +
      encodeURIComponent(q)
    );
    const d = await r.json();
    if(d.extract) return d.extract;
  }catch(e){}
  return "I couldnâ€™t find a clear explanation, but you can ask in another way.";
}

/* SMART SEARCH */
async function smartSearch(q){
  try{
    const url = "https://api.allorigins.win/raw?url=" +
      encodeURIComponent(
        "https://api.duckduckgo.com/?q="+q+"&format=json"
      );
    const r = await fetch(url);
    const d = await r.json();
    if(d.Abstract) return d.Abstract;
  }catch(e){}
  return "I understand your question, but I need more detail. Please explain a little more.";
}
</script>

</body>
</html>