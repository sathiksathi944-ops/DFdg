<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SM VOICE â€“ Intelligent AI Search</title>

<style>
:root{
  --bg:#020617;
  --panel:#0f172a;
  --user:#2563eb;
  --ai:#1e293b;
  --text:#e5e7eb;
  --accent:#22c55e;
}
*{box-sizing:border-box;font-family:system-ui,-apple-system,"Segoe UI",sans-serif}
body{
  margin:0;height:100vh;
  background:radial-gradient(circle at top,#0b1020,#020617);
  color:var(--text);
  display:flex;flex-direction:column;
}
.header{
  padding:14px;text-align:center;font-weight:700;
  border-bottom:1px solid #1e293b;
}
select{
  margin-top:6px;padding:8px 12px;border-radius:10px;
  background:#020617;color:white;border:1px solid #334155;
}
.chat{
  flex:1;padding:16px;overflow-y:auto;
  display:flex;flex-direction:column;gap:14px;
}
.bubble{
  max-width:85%;padding:14px 16px;
  border-radius:22px;line-height:1.45;
  animation:fade .3s ease;
}
.user{
  background:linear-gradient(135deg,#2563eb,#1d4ed8);
  align-self:flex-end;
}
.ai{
  background:#1e293b;
  align-self:flex-start;
}
.result{
  background:#020617;
  border:1px solid #334155;
  border-radius:18px;
  padding:12px;
}
.result a{
  color:#60a5fa;text-decoration:none;font-weight:600;
}
.footer{
  padding:22px;
  display:flex;justify-content:center;
  border-top:1px solid #1e293b;
}
.voice{
  width:120px;height:120px;border-radius:50%;
  background:radial-gradient(circle,#22c55e,#064e3b);
  display:flex;align-items:center;justify-content:center;
  cursor:pointer;
  box-shadow:0 0 35px rgba(34,197,94,.6);
  transition:.3s;
}
.voice.listening{
  background:radial-gradient(circle,#ef4444,#7f1d1d);
  box-shadow:0 0 45px rgba(239,68,68,.8);
}
.wave{display:flex;gap:6px}
.wave span{
  width:7px;height:26px;background:#e5e7eb;
  border-radius:8px;
  animation:wave 1.2s infinite ease-in-out;
}
.wave span:nth-child(2){animation-delay:.1s}
.wave span:nth-child(3){animation-delay:.2s}
.wave span:nth-child(4){animation-delay:.3s}
.wave span:nth-child(5){animation-delay:.4s}
@keyframes wave{
  0%,100%{height:18px}
  50%{height:42px}
}
@keyframes fade{
  from{opacity:0;transform:translateY(6px)}
  to{opacity:1;transform:none}
}
</style>
</head>

<body>

<div class="header">
ðŸŽ§ SM VOICE â€“ Intelligent AI Search (Female)
<br>
<select id="lang">
  <option value="en-US">English</option>
  <option value="hi-IN">Hindi</option>
  <option value="ar-SA">Arabic</option>
</select>
</div>

<div id="chat" class="chat">
  <div class="bubble ai">
    Try saying:<br>
    <b>Who is Elon Musk?</b><br>
    <b>Define Artificial Intelligence</b><br>
    <b>Search Saudi Arabia Vision 2030</b>
  </div>
</div>

<div class="footer">
  <div id="voice" class="voice">
    <div class="wave">
      <span></span><span></span><span></span><span></span><span></span>
    </div>
  </div>
</div>

<script>
const chat = document.getElementById("chat");
const voiceBtn = document.getElementById("voice");
const langSelect = document.getElementById("lang");

const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
const recognition = new SR();
recognition.interimResults = false;

let listening=false,femaleVoice=null;

/* LOAD FEMALE VOICE */
function loadVoices(){
  const voices = speechSynthesis.getVoices();
  const l = langSelect.value;
  femaleVoice =
    voices.find(v=>v.lang===l && /female|zira|google|neural/i.test(v.name))
    || voices.find(v=>v.lang===l)
    || voices[0];
}
speechSynthesis.onvoiceschanged = loadVoices;
loadVoices();

/* CHAT ADD */
function add(text,type){
  const d=document.createElement("div");
  d.className="bubble "+type;
  d.innerHTML=text;
  chat.appendChild(d);
  chat.scrollTop=chat.scrollHeight;
}

/* SPEAK */
function speak(text){
  speechSynthesis.cancel();
  const u=new SpeechSynthesisUtterance(text);
  u.lang=langSelect.value;
  if(femaleVoice)u.voice=femaleVoice;
  u.rate=.95;u.pitch=1.05;
  u.onend=()=>setTimeout(startListening,700);
  speechSynthesis.speak(u);
}

/* START LISTEN */
function startListening(){
  if(listening)return;
  recognition.lang=langSelect.value;
  listening=true;
  voiceBtn.classList.add("listening");
  recognition.start();
}

/* MIC BUTTON */
voiceBtn.onclick=startListening;

/* RESULT */
recognition.onresult=e=>{
  recognition.stop();
  listening=false;
  voiceBtn.classList.remove("listening");
  const text=e.results[0][0].transcript;
  add(text,"user");
  intelligentSearch(text);
};

/* INTELLIGENT SEARCH */
async function intelligentSearch(q){
  add("Thinking and searching intelligentlyâ€¦","ai");
  speak("Let me check that for you");

  /* Wikipedia */
  const wiki=`https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(q)}`;
  try{
    const r=await fetch(wiki);
    const d=await r.json();
    if(d.extract){
      add(`<b>${d.title}</b><br>${d.extract}
      <div class="result"><a target="_blank" href="${d.content_urls.desktop.page}">
      Read more</a></div>`,"ai");
      speak(d.extract.slice(0,120));
      return;
    }
  }catch(e){}

  /* DuckDuckGo */
  const ddg=`https://api.allorigins.win/raw?url=${encodeURIComponent(
    "https://api.duckduckgo.com/?q="+q+"&format=json"
  )}`;
  try{
    const r=await fetch(ddg);
    const d=await r.json();
    if(d.Abstract){
      add(`<b>${q}</b><br>${d.Abstract}`,"ai");
      speak(d.Abstract.slice(0,120));
      return;
    }
  }catch(e){}

  add("Sorry, I couldn't find a clear answer.","ai");
  speak("Sorry, I couldn't find an answer");
}
</script>

</body>
</html>